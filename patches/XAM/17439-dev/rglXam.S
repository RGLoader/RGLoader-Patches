# ============================================================================
#                            RGLoader Xam Patches  (.RGLP file)
#      
# ============================================================================
 
.include "macros.S"
 
 
# ============================================================================
#       ProfileEmbeddedContent::Validate
#       remove sig check
# ============================================================================
        MAKEPATCH 0x81B4555C
0:
        nop
9:
        MAKEPATCH 0x81B45570
0:
        nop
9:
 
 
# ============================================================================
#       XContent::ContentOpenPackageFile
#       ignore hash check
# ============================================================================
        MAKEPATCH 0x81733BBC
0:
        b  -0xFC
9:
 
 
# ============================================================================
#       XContent::ContentMountPackage
#       ignore hash check
# ============================================================================
        MAKEPATCH 0x817342F4
0:
        b  0x14
9:
 
 
# ============================================================================
#       CXNetLogonTask::GetNatType
#       patch out exception in NAT type
# ============================================================================
        MAKEPATCH 0x8181EA04
0:
        nop
		#lis       %r3, -0x7FEB # 0x8015190E
		#ori       %r3, %r3, 0x190E
9:
        MAKEPATCH 0x8181EA30
0:
        nop
9:
        MAKEPATCH 0x8181ECD8
0:
        nop
		#lis       %r3, -0x7FEB # 0x8015190E
		#ori       %r3, %r3, 0x190E
9:

# ============================================================================
#       MmAllocateImageMemory
#       get rid of heap crash errors
# ============================================================================
        MAKEPATCH 0x800AF570
0:
        nop
9:
        MAKEPATCH 0x81D23300
0:
        .long 0x00000000
9:
        MAKEPATCH 0x8009FE50
0:
        nop
9:
 
 
# ============================================================================
#       XMsgStartIORequestEx
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
        MAKEPATCH 0x81761700
0:
        li  %r3, 0
9:

# ============================================================================
#       Media extended authentication
#       fix dvd drives for jtags
# ============================================================================
        MAKEPATCH 0x8175C974
0:
        b   0x10
9:


# ============================================================================
#       XMsgInProcessCall
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
        MAKEPATCH 0x817617C0
0:
        li  %r3, 0
9:
       
 
# ============================================================================
#       XMsgSystemProcessCall
#       get rid of annoying dbgprint about missing sysdlls
# ============================================================================
        MAKEPATCH 0x81761938
0:
        li  %r3, 0
9:
 
 
# ============================================================================
#       CDvdDrive::Authenticate
#       fix retail xex check for jtags
# ============================================================================
        MAKEPATCH 0x8176D2D8
0:
        li  %r3, 0
        blr
9:

# ============================================================================
# XContentGetLicenseMask - patches xam to think all arcade are full at runtime
# ============================================================================
	MAKEPATCH 0x817C11B8
0:
	li		%r11, -1
	stw		%r11, 0(%r3)
	li		%r3, 0
	blr
9:

# ============================================================================   
# CMarshaller::Initialize
# ============================================================================
#	   MAKEPATCH 0x819D8694
#0:
#        nop
#9:
 
#	   MAKEPATCH 0x81AB9334
#0:
#        li   %r3, 0
#9:

# 	   MAKEPATCH 0x819D845C
#0:
#        nop
#9:
# 	   MAKEPATCH 0x81AA4850
#0:
#        nop
#9:

# ============================================================================
#	CXamUpdateManifest::IsXttValidAndCurrent
#       spoof version to 17489
# ============================================================================
	MAKEPATCH 0x817BE2E0
0:
	nop
9:
	MAKEPATCH 0x817BE314
0:
	b         0x48
9:

# ============================================================================
#	CXamUpdateManifest::IsXttValidAndCurrent 
#        Fix manifest not loading bullshit xtt problem..
# ============================================================================
	MAKEPATCH 0x817BE2E0
0:
	nop
9:
	MAKEPATCH 0x817BE314
0:
	b 0x48
9:

# ============================================================================
        .long 0xffffffff   # END OF PATCHES
# ============================================================================
